<!DOCTYPE html>
<html>
<body>

<h1>Crisp generator version 2</h1>
<h2>tasty snacks r us - now with pictures üì∑üì∏üñºÔ∏è</h2>

<p>Click the button to retrieve a special suggestion </p>

<button onclick="myFunction()">I want crisps</button>

<p id="demo">time to pick something!</p>
<img id="pic" src="img/mr-bean-checking-time.gif" alt="crisp" width="500" height="600">

<script>
function myFunction() {
  const crisps = ["Walkers salt and vinegar", "Walkers salted", "Hoola hoops", "Chipsticks", "The special salted ones from the post office"];
  const crispsPics = ["img/05768_a_1.jpg", "img/640x640.jpg", "img/s-hula-pla_1__83968.jpg", "img/61J3RDU44fL._AC_SX679_PIbundle-8,TopRight,0,0_SH20_.jpg", "img/c5d11dfad89cd3300162889284bf38cdecdfcdc6.jpg"];
  const index = Math.floor(Math.random()*crisps.length);
  const selectedType = crisps[index];
  document.getElementById("demo").innerHTML = selectedType;
  document.getElementById("pic").src = crispsPics[index];
  
}

</script>
  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .box {
      width: 100px;
      height: 100px;
      border: 1px solid #000;
      text-align: center;
      line-height: 100px;
      cursor: pointer;
    }
    .selected {
      background-color: lightblue;
    }
    #submit {
      margin-top: 10px;
      padding: 5px 10px;
      font-size: 16px;
      cursor: not-allowed;
    }
  </style>

<h1><Connections 4 t dog</h1>

<div id="mistakes-container">
  <p>Mistakes remaining: <span id="mistakes">4</span></p>
</div>

<div class="grid" id="grid">
  <!-- Each box is given a unique id for identification -->
  <div class="box" onclick="selectBox(this)">Goose</div>
  <div class="box" onclick="selectBox(this)">nut</div>
  <div class="box" onclick="selectBox(this)">bestie</div>
  <div class="box" onclick="selectBox(this)">chicken</div>
  <div class="box" onclick="selectBox(this)">kidney</div>
  <div class="box" onclick="selectBox(this)">chickpea</div>
  <div class="box" onclick="selectBox(this)">black eyed</div>
  <div class="box" onclick="selectBox(this)">butter</div>
  <div class="box" onclick="selectBox(this)">Egg</div>
  <div class="box" onclick="selectBox(this)">silent</div>
  <div class="box" onclick="selectBox(this)">deadly</div>
  <div class="box" onclick="selectBox(this)">squelchy</div>
  <div class="box" onclick="selectBox(this)">Lemon</div>
  <div class="box" onclick="selectBox(this)">lime</div>
  <div class="box" onclick="selectBox(this)">orange</div>
  <div class="box" onclick="selectBox(this)">tomato</div>
</div>

<button id="submit" onclick="checkSelection()">Submit</button>

<script>
  let selectedBoxes = [];
  let mistakesRemaining = 4;

  function selectBox(box) {
    if (selectedBoxes.length < 4) {
      box.classList.toggle('selected');
      updateSubmitButton();
    }
  }

  function updateSubmitButton() {
    const submitButton = document.getElementById('submit');
    submitButton.disabled = selectedBoxes.length !== 4;
  }

  function checkSelection() {
    const categories = {
      nicknames: ["Goose", "nut", "bestie", "chicken"],
      breakfast: ["kidney", "chickpea", "black eyed", "butter"],
      farts: ["Egg", "silent", "deadly", "squelchy"],
      juice: ["Lemon", "lime", "orange", "tomato"]
    };

    const selectedCategories = [];

    selectedBoxes.forEach(box => {
      for (const [category, words] of Object.entries(categories)) {
        if (words.includes(box.textContent)) {
          selectedCategories.push(category);
          break;
        }
      }
    });

    if (selectedCategories.length === 1) {
      alert(`Correct! You guessed the category: ${selectedCategories[0]}`);
      selectedBoxes.forEach(box => box.classList.add(selectedCategories[0]));
      resetGame();
    } else {
      mistakesRemaining--;
      const message = (mistakesRemaining === 0) ? "You've lost!" : "Incorrect. Try again.";
      alert(`${message} Mistakes remaining: ${mistakesRemaining}`);
      
      if (mistakesRemaining === 0) {
        showCategories();
      } else {
        resetGame();
      }
    }

    updateMistakes();
  }

  function updateMistakes() {
    document.getElementById('mistakes').textContent = mistakesRemaining;
  }

  function resetGame() {
    selectedBoxes.forEach(box => box.classList.remove('selected'));
    selectedBoxes = [];
    updateSubmitButton();
  }

  function showCategories() {
    const grid = document.getElementById('grid');
    for (const box of grid.children) {
      for (const [category, words] of Object.entries(categories)) {
        if (words.includes(box.textContent)) {
          box.classList.add(category);
          break;
        }
      }
    }
  }
</script>
  
</body>
</html>

