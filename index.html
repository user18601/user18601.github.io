<!DOCTYPE html>
<html>
<body>

<h1>Crisp generator version 2</h1>
<h2>tasty snacks r us - now with pictures üì∑üì∏üñºÔ∏è</h2>

<p>Click the button to retrieve a special suggestion </p>

<button onclick="myFunction()">I want crisps</button>

<p id="demo">time to pick something!</p>
<img id="pic" src="img/mr-bean-checking-time.gif" alt="crisp" width="500" height="600">

<script>
function myFunction() {
  const crisps = ["Walkers salt and vinegar", "Walkers salted", "Hoola hoops", "Chipsticks", "The special salted ones from the post office"];
  const crispsPics = ["img/05768_a_1.jpg", "img/640x640.jpg", "img/s-hula-pla_1__83968.jpg", "img/61J3RDU44fL._AC_SX679_PIbundle-8,TopRight,0,0_SH20_.jpg", "img/c5d11dfad89cd3300162889284bf38cdecdfcdc6.jpg"];
  const index = Math.floor(Math.random()*crisps.length);
  const selectedType = crisps[index];
  document.getElementById("demo").innerHTML = selectedType;
  document.getElementById("pic").src = crispsPics[index];
  
}</script>

  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .box {
      width: 100px;
      height: 100px;
      border: 1px solid #000;
      text-align: center;
      line-height: 100px;
      cursor: pointer;
    }
    .selected {
      background-color: lightblue;
    }
    .nicknames {
      background-color: #ffcccb;
    }
    .breakfast {
      background-color: #ffebcd;
    }
    .farts {
      background-color: #c0c0c0;
    }
    .juice {
      background-color: #d3ffd3;
    }
    #submit {
      margin-top: 10px;
      padding: 5px 10px;
      font-size: 16px;
    }
  </style>

<h1>Connections game for T dog</h1>

<div id="mistakes-container">
  <p>Mistakes remaining: <span id="mistakes">4</span></p>
</div>

<div class="grid" id="grid">
  <!-- Boxes will be dynamically shuffled using JavaScript -->
</div>

<button id="submit" onclick="checkSelection()">Submit</button>

<div id="categoryText"></div>

<script>
  let selectedBoxes = [];
  let mistakesRemaining = 4;

  const words = ["Goose", "nut", "bestie", "chicken", "kidney", "chickpea", "black eyed", "butter", "Egg", "silent", "deadly", "squelchy", "Lemon", "lime", "orange", "tomato"];

  // Shuffle the words array using Fisher-Yates algorithm
  for (let i = words.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [words[i], words[j]] = [words[j], words[i]];
  }

  const grid = document.getElementById('grid');

  // Populate the shuffled words into the grid
  words.forEach(word => {
    const box = document.createElement('div');
    box.className = 'box';
    box.textContent = word;
    box.onclick = () => selectBox(box);
    grid.appendChild(box);
  });

  function selectBox(box) {
    if (selectedBoxes.length < 4) {
      box.classList.toggle('selected');
      selectedBoxes = Array.from(document.getElementsByClassName('selected'));
      updateSubmitButton();
    }
  }

  function updateSubmitButton() {
    const submitButton = document.getElementById('submit');
    submitButton.disabled = selectedBoxes.length !== 4;
  }

  function checkSelection() {
    const categories = {
      nicknames: ["Goose", "nut", "bestie", "chicken"],
      breakfast: ["kidney", "chickpea", "black eyed", "butter"],
      farts: ["Egg", "silent", "deadly", "squelchy"],
      juice: ["Lemon", "lime", "orange", "tomato"]
    };

    const selectedCategories = [];

    selectedBoxes.forEach(box => {
      for (const [category, words] of Object.entries(categories)) {
        if (words.includes(box.textContent)) {
          selectedCategories.push(category);
          break;
        }
      }
    });

    if (selectedCategories.length === 1) {
      const categoryText = getCategoryText(selectedCategories[0]);
      alert(`Correct! You guessed the category: ${categoryText}`);
      selectedBoxes.forEach(box => box.classList.add(selectedCategories[0]));
      displayCategoryText(categoryText, selectedCategories[0]);
      resetGame();
    } else {
      mistakesRemaining--;

      // Check if the user is one away from guessing 3 out of 4 words
      const oneAway = selectedCategories.some(category => {
        const correctWords = categories[category];
        const selectedWords = selectedBoxes.map(box => box.textContent);
        const correctCount = correctWords.filter(word => selectedWords.includes(word)).length;
        return correctCount === 3;
      });

      const message = (mistakesRemaining === 0) ? "You've lost!" : (oneAway ? "Incorrect. You were one away!" : "Incorrect. Try again.");
      alert(`${message} Mistakes remaining: ${mistakesRemaining}`);
      
      if (mistakesRemaining === 0) {
        showCategories();
      } else {
        resetGame();
      }
    }

    updateMistakes();
  }

  function getCategoryText(category) {
    switch (category) {
      case "nicknames":
        return "Nicknames: nicknames";
      case "breakfast":
        return "Breakfast: breakfast of champions";
      case "farts":
        return "Farts: types of farts";
      case "juice":
        return "Juice: types of juice";
      default:
        return "";
    }
  }

  function updateMistakes() {
    document.getElementById('mistakes').textContent = mistakesRemaining;
  }

  function resetGame() {
    selectedBoxes.forEach(box => box.classList.remove('selected'));
    selectedBoxes = [];
    updateSubmitButton();
    clearCategoryText();
  }

  function showCategories() {
    const grid = document.getElementById('grid');
    for (const box of grid.children) {
      for (const [category, words] of Object.entries(categories)) {
        if (words.includes(box.textContent)) {
          box.classList.add(category);
          break;
        }
      }
    }
    clearCategoryText();
  }

  function displayCategoryText(text, category) {
    const categoryTextElement = document.getElementById('categoryText');
    categoryTextElement.textContent = text;
    categoryTextElement.style.color = getCategoryColor(category);
  }

  function clearCategoryText() {
    document.getElementById('categoryText').textContent = '';
  }

  function getCategoryColor(category) {
    switch (category) {
      case "nicknames":
        return '#ffcccb';
      case "breakfast":
        return '#ffebcd';
      case "farts":
        return '#c0c0c0';
      case "juice":
        return '#d3ffd3';
      default:
        return '';
    }
  }
</script>
  

</body>
</html>

